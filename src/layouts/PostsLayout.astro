---
import BaseLayout from "@layouts/BaseLayout.astro";

const { frontmatter } = Astro.props;
const { author, publicationDate, readingMinutes, authorImage } = frontmatter;
---

<BaseLayout>
    <div class="post-layout-container w-full flex justify-center items-center h-full">
        <div class="post-layout-content w-full mx-auto h-full flex flex-col gap-2 p-4 pb-0 md:p-8 md:pb-0">
            <div class="post-author-info flex justify-between items-center">
                <div class="author-info flex items-center gap-4">
                    <div class="author-pfp size-14 rounded-full overflow-hidden max-sm:size-12">
                        <img 
                            src={authorImage || '/placeholder.png'} 
                            alt={author} 
                            title={author} 
                            class="w-full h-full object-cover select-none" 
                            draggable="false"
                        />
                    </div>
                    <div class="author-name">
                        <span style="color: var(--color-text-info);" class="font-semibold text-lg max-sm:text-base">{author}</span>
                    </div>
                </div>
                <div class="publication-date">
                    <span style="color: var(--color-text-info);" class="text-sm">{publicationDate}</span>
                </div>
            </div>
            <div class="reading-minutes mb-2">
                <span style="color: var(--color-text-tertiary);">{readingMinutes} minutos de lectura</span>
            </div>
            <article class="post-content">
                <slot />
            </article>
        </div>
    </div>
</BaseLayout>

<style is:global>
    .post-content {
        line-height: 1.7;
        color: var(--color-text-secondary);
    }

    .post-content h1 {
        margin-bottom: 0.4em;
    }

    .post-content h1,
    .post-content h2,
    .post-content h3,
    .post-content h4,
    .post-content h5,
    .post-content h6 {
        color: var(--color-text-primary);
        font-weight: 700;
        line-height: 1.3;
    }

    .post-content h2,
    .post-content h3,
    .post-content h4,
    .post-content h5,
    .post-content h6 {
        margin-bottom: 0.5em;
    }

    .post-content h1 { font-size: clamp(1.65rem, 2.5vw, 1.95rem); }
    .post-content h2 {
        font-size: clamp(1.3rem, 2.5vw, 1.55rem);
        border: 1px solid;
        border-right: 0;
        border-left: 0;
        border-top: 0;
        border-image-slice: 1;
        border-width: 1px;
        border-image-source: var(--color-quote-border);
        padding-bottom: 0.3em;
    }
    .post-content h3 { font-size: clamp(1.2rem, 2.5vw, 1.45rem); }
    

    .post-content p {
        margin-bottom: 1.25em;
        font-size: clamp(1rem, 2.5vw, 1.125rem);
    }

    .post-content a {
        color: var(--color-primary);
    }

    .post-content img {
        display: block;
        margin-left: auto;
        margin-right: auto;
        border-radius: 0.5rem;
        margin-top: 2em;
        margin-bottom: 2em;
        max-width: 100%;
        height: auto;
    }

    .post-content strong {
        font-weight: 700;
        color: var(--color-text-primary);
    }

    .post-content em { font-style: italic; }

    .post-content blockquote {
        margin: 1.5em 0;
        padding: 0.5em 1em;
        border-left: 4px solid var(--color-primary);
        background-color: var(--color-quote-bg);
        color: var(--color-quote-text);
        font-style: italic;
    }

    .post-content :not(pre) > code {
        background-color: var(--color-code-bg);
        color: var(--color-code-text);
        padding: 0.2em 0.4em;
        border-radius: 0.25rem;
        font-family: monospace;
        font-size: 0.9em;
    }

    .post-content ul, .post-content ol {
        padding-left: 1.5em;
        margin-bottom: 1.25em;
    }

    .post-content ul { list-style-type: disc; }
    .post-content ol { list-style-type: decimal; }

    .post-content li { margin-bottom: 0.5em; }

    .post-content li::marker {
        color: var(--color-primary);
        font-weight: 600;
    }

    .post-content p:last-child {
        margin-bottom: 0.3rem;
    }
</style
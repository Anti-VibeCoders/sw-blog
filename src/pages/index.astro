---
import PostCard from "@components/PostCard.astro";
import BaseLayout from "@layouts/BaseLayout.astro";

const allPosts = Object.values(import.meta.glob('./posts/*.md', { eager: true }))

allPosts.sort((a: any, b: any) => new Date(b.frontmatter.publicationDate).getTime() - new Date(a.frontmatter.publicationDate).getTime());

const latestPost: any = allPosts[0]
---

<BaseLayout>
	<section class="mb-12 flex flex-col gap-12">
		<article>
			
			<div class="flex flex-col gap-3 items-center justify-center p-12">
				<img src="/coding.png" class="size-64 select-none" alt="coding image" draggable="false">
				<span class="font-semibold dark:text-[#f9fafb] text-xl">Código, Historias e Ideas</span>
			</div>
		</article>
		<article class="flex flex-col">
			<span class="font-semibold mb-5 text-neutral-400">Última Publicación</span>
			<div class="grid grid-cols-1 grid-rows-1 w-full">
				<PostCard postUrl={latestPost.url} postImage={latestPost.frontmatter.imagePreview} postTitle={latestPost.frontmatter.title} postAuthor={latestPost.frontmatter.author} postAuthorImage={latestPost.frontmatter.authorImage} postDate={latestPost.frontmatter.publicationDate} postDescription={latestPost.frontmatter.description} />
			</div>
		</article>
		<hr class="border-neutral-300 dark:border-neutral-800"/>
		<article>
			<span class="font-semibold text-neutral-400">Otras Publicaciones</span>
			<div class="grid grid-cols-1 items-center w-full gap-6 mt-6">
				{allPosts.map((post: any) => (
					<PostCard postUrl={post.url} postImage={post.frontmatter.imagePreview} postTitle={post.frontmatter.title} postAuthor={post.frontmatter.author} postAuthorImage={post.frontmatter.authorImage} postDate={post.frontmatter.publicationDate} postDescription={post.frontmatter.description} />
				))}
			</div>
		</article>
	</section>
</BaseLayout>